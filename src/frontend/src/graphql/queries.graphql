query GetReferenceLetterForViewer($id: ID!) {
  referenceLetter(id: $id) {
    id
    title
    authorName
    authorTitle
    organization
    file {
      id
      url
      filename
      contentType
    }
  }
}

query GetReferenceLetter($id: ID!) {
  referenceLetter(id: $id) {
    id
    title
    authorName
    authorTitle
    organization
    dateWritten
    rawText
    extractedData {
      author {
        name
        title
        company
        relationship
      }
      testimonials {
        quote
        skillsMentioned
      }
      skillMentions {
        skill
        quote
        context
      }
      experienceMentions {
        company
        role
        quote
      }
      discoveredSkills {
        skill
        quote
        context
        category
      }
      metadata {
        extractedAt
        modelVersion
        processingTimeMs
      }
    }
    status
    createdAt
    updatedAt
    user {
      id
      email
      name
    }
    file {
      id
      filename
      contentType
      sizeBytes
    }
  }
}

query GetReferenceLetters($userId: ID!) {
  referenceLetters(userId: $userId) {
    id
    title
    authorName
    authorTitle
    organization
    status
    createdAt
  }
}

query GetReferenceLetterStatus($id: ID!) {
  referenceLetter(id: $id) {
    id
    status
  }
}

query GetUser($id: ID!) {
  user(id: $id) {
    id
    email
    name
    createdAt
    updatedAt
  }
}

query GetFiles($userId: ID!) {
  files(userId: $userId) {
    id
    filename
    contentType
    sizeBytes
    storageKey
    createdAt
  }
}

query GetResume($id: ID!) {
  resume(id: $id) {
    id
    status
    extractedData {
      name
      email
      phone
      location
      summary
      extractedAt
      confidence
    }
    errorMessage
    createdAt
    updatedAt
    user {
      id
      email
      name
    }
    file {
      id
      filename
      contentType
    }
  }
}

query GetUserResumes($userId: ID!) {
  resumes(userId: $userId) {
    id
    status
  }
}

query GetProfile($userId: ID!) {
  profileByUserId(userId: $userId) {
    id
    name
    email
    phone
    location
    summary
    profilePhotoUrl
    experiences {
      id
      company
      title
      location
      startDate
      endDate
      isCurrent
      description
      highlights
      displayOrder
      source
      validationCount
      createdAt
      updatedAt
    }
    educations {
      id
      institution
      degree
      field
      startDate
      endDate
      isCurrent
      description
      gpa
      displayOrder
      source
      createdAt
      updatedAt
    }
    skills {
      id
      name
      normalizedName
      category
      displayOrder
      source
      validationCount
      createdAt
      updatedAt
    }
    createdAt
    updatedAt
  }
}

query GetProfileById($id: ID!) {
  profile(id: $id) {
    id
    user {
      id
    }
    name
    email
    phone
    location
    summary
    profilePhotoUrl
    experiences {
      id
      company
      title
      location
      startDate
      endDate
      isCurrent
      description
      highlights
      displayOrder
      source
      validationCount
      createdAt
      updatedAt
    }
    educations {
      id
      institution
      degree
      field
      startDate
      endDate
      isCurrent
      description
      gpa
      displayOrder
      source
      createdAt
      updatedAt
    }
    skills {
      id
      name
      normalizedName
      category
      displayOrder
      source
      validationCount
      createdAt
      updatedAt
    }
    createdAt
    updatedAt
  }
}

query GetTestimonials($profileId: ID!) {
  testimonials(profileId: $profileId) {
    id
    quote
    author {
      id
      name
      title
      company
      linkedInUrl
      imageUrl
    }
    authorName
    authorTitle
    authorCompany
    relationship
    createdAt
    validatedSkills {
      id
      name
    }
    referenceLetter {
      id
      file {
        id
        url
      }
    }
  }
}

query GetSkillValidations($skillId: ID!) {
  skillValidations(skillId: $skillId) {
    id
    quoteSnippet
    createdAt
    referenceLetter {
      id
      extractedData {
        author {
          name
          title
          company
          relationship
        }
      }
    }
  }
}

query GetExperienceValidations($experienceId: ID!) {
  experienceValidations(experienceId: $experienceId) {
    id
    quoteSnippet
    createdAt
    referenceLetter {
      id
      extractedData {
        author {
          name
          title
          company
          relationship
        }
      }
    }
  }
}

query GetDocumentDetectionStatus($fileId: ID!) {
  documentDetectionStatus(fileId: $fileId) {
    fileId
    status
    detection {
      hasCareerInfo
      hasTestimonial
      testimonialAuthor
      confidence
      summary
      documentTypeHint
      fileId
    }
    error
  }
}

query GetDocumentProcessingStatus($resumeId: ID, $referenceLetterID: ID) {
  documentProcessingStatus(resumeId: $resumeId, referenceLetterID: $referenceLetterID) {
    allComplete
    resume {
      id
      status
      extractedData {
        name
        email
        phone
        location
        summary
        extractedAt
        confidence
      }
      errorMessage
    }
    referenceLetter {
      id
      status
      extractedData {
        author {
          name
          title
          company
          relationship
        }
        testimonials {
          quote
          skillsMentioned
        }
        skillMentions {
          skill
          quote
          context
        }
        experienceMentions {
          company
          role
          quote
        }
        discoveredSkills {
          skill
          quote
          context
          category
        }
        metadata {
          extractedAt
          modelVersion
          processingTimeMs
        }
      }
    }
  }
}
